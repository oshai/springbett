(function(){function n(n,t,i){var r;return function(n){r||(r=i.get("$http"));var u=r.pendingRequests[r.pendingRequests.length-1];return u.tracker&&(angular.isArray(u.tracker)||(u.tracker=[u.tracker]),angular.forEach(u.tracker,function(i){t(i).addPromise(n,u)})),n}}function t(n,t){return{request:function(i){return i.tracker&&(angular.isArray(i.tracker)||(i.tracker=[i.tracker]),i.$promiseTrackerDeferred=i.$promiseTrackerDeferred||[],angular.forEach(i.tracker,function(n){var r=t(n).createPromise(i);i.$promiseTrackerDeferred.push(r)})),n.when(i)},response:function(t){return t.config&&t.config.$promiseTrackerDeferred&&angular.forEach(t.config.$promiseTrackerDeferred,function(n){n.resolve(t)}),n.when(t)},responseError:function(t){return t.config&&t.config.$promiseTrackerDeferred&&angular.forEach(t.config.$promiseTrackerDeferred,function(n){n.reject(t)}),n.reject(t)}}}angular.module("ajoslin.promise-tracker",[]);angular.module("ajoslin.promise-tracker").config(["$httpProvider",function(i){i.interceptors?i.interceptors.push(t):i.responseInterceptors.push(n)}]);n.$inject=["$q","promiseTracker","$injector"];t.$inject=["$q","promiseTracker"];angular.module("ajoslin.promise-tracker").provider("promiseTracker",function(){function i(){for(var t=n.length,i;t;){if(t--,i=n[t].charCodeAt(0),i===57)return n[t]="A",n.join("");if(i===90)n[t]="0";else return n[t]=String.fromCharCode(i+1),n.join("")}return n.unshift("0"),n.join("")}var n=["0","0","0"],t={};this.$get=["$q","$timeout",function(n,r){function u(t){function o(n){angular.forEach(f[n.event],function(t){t.call(u,n.value,n.id)})}function s(t){function h(){u._minDuration&&(u._minPromise=r(angular.noop,u._minDuration));u._maxDuration&&(u._maxPromise=r(f.resolve,u._maxDuration))}function c(t){return function(i){(u._minPromise||n.when()).then(function(){var n=e.indexOf(f);e.splice(n,1);e.length===0&&(u._maxPromise&&(r.cancel(u._maxPromise),u._maxPromise=null),u._delayPromise&&(r.cancel(u._delayPromise),u._delayPromise=null));o({event:t?"error":"success",id:s,value:i});o({event:"done",id:s,value:i})})}}var f=n.defer(),s=i();return e.push(f),e.length===1&&(u._activationDelay?u._delayPromise=r(function(){u._delayPromise=null;h()},u._activationDelay):h()),o({event:"start",id:s,value:t}),f.promise.then(c(!1),c(!0)),f}var u=this,f={start:[],done:[],error:[],success:[]},e=[];t=t||{};u.setMinDuration=function(n){u._minDuration=n};u.setMinDuration(t.minDuration);u.setMaxDuration=function(n){u._maxDuration=n};u.setMaxDuration(t.maxDuration);u.setActivationDelay=function(n){u._activationDelay=n};u.setActivationDelay(t.activationDelay);u.active=function(){return u._delayPromise?!1:e.length>0};u.cancel=function(){angular.forEach(e,function(n){n.resolve()})};u.addPromise=function(t,i){var u=t&&(t.then||t.$then||t.$promise&&t.$promise.then),r;if(!u)throw new Error("promiseTracker#addPromise expects a promise object!");return r=s(i),u(function(n){return r.resolve(n),n},function(t){return r.reject(t),n.reject(t)}),r};u.createPromise=s;u.on=u.bind=function(n,t){if(!f[n])throw new Error("Cannot bind callback for event '"+n+"'. Allowed types: 'start', 'done', 'error', 'success'");return f[n].push(t),u};u.off=u.unbind=function(n,t){if(!f[n])throw new Error("Cannot unbind callback for event '"+n+"'. Allowed types: 'start', 'done', 'error', 'success'");if(t){var i=f[n].indexOf(t);f[n].splice(i,1)}else f[n].length=0;return u}}var f=this;return function(n,i){return t[n]||(t[n]=new u(i)),t[n]}}]})})();
/*
//# sourceMappingURL=promise-tracker.min.js.map
*/